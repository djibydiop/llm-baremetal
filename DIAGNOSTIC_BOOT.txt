╔════════════════════════════════════════════════════════════════════╗
║       DIAGNOSTIC: PC NE BOOT PAS - SOLUTIONS                       ║
╚════════════════════════════════════════════════════════════════════╝

PROBLÈME RÉSOLU: Partition FAT32 était vide!
✅ Nouvelle image créée: llm-baremetal-usb.img (128 MB)
✅ Contenu vérifié: BOOTX64.EFI + iwlwifi-cc-a0-72.ucode présents

════════════════════════════════════════════════════════════════════

ÉTAPE 1: FLASHER LA NOUVELLE IMAGE SUR USB
──────────────────────────────────────────

Option A - balenaEtcher (RECOMMANDÉ):
  1. Télécharger: https://etcher.balena.io/
  2. Lancer balenaEtcher
  3. "Flash from file" → sélectionner llm-baremetal-usb.img
  4. "Select target" → choisir votre clé USB
  5. "Flash!" → attendre la fin + vérification
  
Option B - dd via WSL:
  1. Identifier votre USB: wsl lsblk
     (chercher la clé USB, ex: /dev/sdb)
  2. Flasher: wsl sudo dd if=llm-baremetal-usb.img of=/dev/sdX bs=4M status=progress
     (remplacer /dev/sdX par votre périphérique)
  3. Synchroniser: wsl sudo sync

Option C - Rufus (si n'a pas fonctionné avant):
  1. Lancer Rufus
  2. Sélectionner l'USB
  3. "SELECT" → llm-baremetal-usb.img
  4. Rufus détecte "ISOHybrid image" → choisir "Write in DD Image mode"
  5. Partition scheme: GPT
  6. Target system: UEFI
  7. START

════════════════════════════════════════════════════════════════════

ÉTAPE 2: CONFIGURATION BIOS/UEFI (CRITIQUE!)
─────────────────────────────────────────────

⚠️  SI LE PC NE BOOT TOUJOURS PAS, C'EST UN PROBLÈME DE BIOS ⚠️

A. Accéder au BIOS:
   - Au démarrage: appuyer sur DEL, F2, F10, ou F12 (selon fabricant)
   - Marques courantes:
     * Dell: F2
     * HP: F10 ou ESC
     * Lenovo: F1 ou F2
     * ASUS: DEL ou F2
     * MSI: DEL
     * Gigabyte: DEL

B. Paramètres OBLIGATOIRES:

   1. DÉSACTIVER SECURE BOOT ★★★ CRITIQUE ★★★
      ────────────────────────────────────────
      Emplacement typique:
        - Security → Secure Boot → Disabled
        - Boot → Secure Boot → Disabled
        - Authentication → Secure Boot → Disabled
      
      ⚠️  Sans ceci, UEFI refusera de booter sur votre fichier .efi
      
   2. BOOT MODE: UEFI (PAS Legacy/CSM)
      ──────────────────────────────────
      Emplacement:
        - Boot → Boot Mode → UEFI
        - Boot → Launch CSM → Disabled
        - Boot → UEFI/Legacy Boot → UEFI Only
      
   3. BOOT ORDER: USB EN PREMIER
      ────────────────────────────
      Option A: Modifier boot order permanent
        - Boot → Boot Priority → USB HDD en #1
        - Boot → Boot Option #1 → USB
      
      Option B: Menu de boot temporaire (PLUS SIMPLE)
        - Redémarrer et appuyer sur F12/F11/F8 pendant le boot
        - Sélectionner la clé USB dans la liste
        - Chercher: "USB HDD", "USB Storage", ou nom de marque USB

   4. FAST BOOT: Désactivé (optionnel mais recommandé)
      ──────────────────────────────────────────────────
      - Boot → Fast Boot → Disabled
      (Permet de voir les messages UEFI)

C. Sauvegarder et redémarrer:
   - F10 → Save and Exit
   - Ou naviguer: Exit → Save Changes and Exit

════════════════════════════════════════════════════════════════════

ÉTAPE 3: BOOT ET TESTS
───────────────────────

1. Insérer la clé USB flashée
2. Redémarrer le PC
3. Choisir USB dans menu de boot (F12) OU attendre boot automatique

COMPORTEMENT ATTENDU:
   ┌──────────────────────────────────────────────────┐
   │ Bare-Metal LLM Inference System v1.0            │
   │ ─────────────────────────────────────────────────│
   │ Initializing WiFi...                             │
   │ PCI scan: Intel AX200 WiFi detected              │
   │ Loading firmware: iwlwifi-cc-a0-72.ucode         │
   │ Firmware loaded successfully (1329780 bytes)     │
   │ Radio ON, MAC: XX:XX:XX:XX:XX:XX                │
   │ Scanning networks...                             │
   │ Networks found:                                  │
   │   [1] MyWiFi (WPA2, -45 dBm)                    │
   │   [2] NeighborWiFi (WPA2, -67 dBm)              │
   │   ...                                            │
   └──────────────────────────────────────────────────┘

════════════════════════════════════════════════════════════════════

PROBLÈMES COURANTS ET SOLUTIONS
────────────────────────────────

❌ SYMPTÔME: "No bootable device" / "Operating system not found"
   └─> CAUSE: Boot order incorrect ou Legacy mode activé
   └─> SOLUTION: 
       1. Vérifier Secure Boot DÉSACTIVÉ
       2. Vérifier Boot Mode = UEFI (pas Legacy)
       3. Utiliser F12 pour sélectionner USB manuellement

❌ SYMPTÔME: PC boot directement sur Windows/autre OS
   └─> CAUSE: Boot order met HDD/SSD avant USB
   └─> SOLUTION: 
       1. Appuyer sur F12 pendant boot pour menu temporaire
       2. Sélectionner la clé USB
       OU modifier boot order dans BIOS

❌ SYMPTÔME: Écran noir, rien ne se passe
   └─> CAUSE: Secure Boot actif ou fichier EFI corrompu
   └─> SOLUTION:
       1. Retourner dans BIOS → DÉSACTIVER Secure Boot
       2. Reflasher l'USB avec balenaEtcher
       3. Vérifier que le PC a une carte WiFi Intel AX200/AX201/AX210

❌ SYMPTÔME: "Secure Boot Violation" ou "Invalid signature"
   └─> CAUSE: Secure Boot n'est pas désactivé
   └─> SOLUTION: 
       Retourner dans BIOS → Security → Secure Boot → DISABLED

❌ SYMPTÔME: USB non reconnu dans menu boot
   └─> CAUSE: USB mal flashée ou format non reconnu
   └─> SOLUTION:
       1. Utiliser balenaEtcher (plus compatible que dd ou Rufus)
       2. Essayer un autre port USB (USB 2.0 de préférence)
       3. Vérifier que la clé fait au moins 256 MB

❌ SYMPTÔME: Boot réussi mais "WiFi device not found"
   └─> CAUSE: Pas de carte Intel AX200/AX201/AX210
   └─> SOLUTION:
       Vérifier le matériel:
         Windows: Gestionnaire de périphériques → Cartes réseau
         Chercher: "Intel Wi-Fi 6 AX200" ou AX201/AX210
       Si autre carte → driver non supporté (code uniquement pour AX200)

════════════════════════════════════════════════════════════════════

VÉRIFICATION MATÉRIELLE REQUISE
────────────────────────────────

Votre PC doit avoir:
  ✓ Architecture: x86_64 (Intel/AMD 64-bit)
  ✓ Firmware: UEFI (pas BIOS Legacy)
  ✓ WiFi: Intel AX200, AX201, ou AX210
  ✓ RAM: Minimum 256 MB (recommandé 512 MB+)
  ✓ USB: Port USB 2.0 ou 3.0 fonctionnel

Pour vérifier votre carte WiFi sous Windows:
  1. Win + X → Gestionnaire de périphériques
  2. Développer "Cartes réseau"
  3. Chercher "Intel(R) Wi-Fi 6 AX200/AX201/AX210"

════════════════════════════════════════════════════════════════════

CHECKLIST COMPLÈTE AVANT BOOT
──────────────────────────────

[ ] 1. Image USB flashée avec balenaEtcher ou dd
[ ] 2. Secure Boot DÉSACTIVÉ dans BIOS
[ ] 3. Boot Mode: UEFI (pas Legacy)
[ ] 4. Boot Order: USB en premier OU utiliser menu F12
[ ] 5. Fast Boot désactivé (optionnel)
[ ] 6. Carte WiFi Intel AX200/AX201/AX210 présente
[ ] 7. USB insérée dans port USB 2.0 ou 3.0
[ ] 8. Clé USB d'au moins 256 MB

════════════════════════════════════════════════════════════════════

Si le problème persiste après avoir tout vérifié:
  - Prendre une photo/vidéo de l'écran au boot
  - Noter les messages d'erreur exacts
  - Vérifier les logs UEFI si accessibles
  - Tester sur un autre PC avec Intel AX200

════════════════════════════════════════════════════════════════════
